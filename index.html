<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>汐島</title>

  <!-- 外部 CSS -->
  <link rel="stylesheet" href="style.css?v=2">
</head>

<body>

  <!-- ✅ Ribbon Fog Layer（絲帶霧） -->
  <div class="fog-wrap" aria-hidden="true">
    <span class="fog-ribbon r1"></span>
    <span class="fog-ribbon r2"></span>
    <span class="fog-ribbon r3"></span>
    <span class="fog-ribbon r4"></span>
    <span class="fog-ribbon r5"></span>
  </div>

  <header class="topbar">
    <div class="brand">汐島</div>
    <nav class="nav">
      <a href="#world">世界觀</a>
      <a href="#island">島嶼</a>
      <a href="#characters">角色</a>
      <a href="#guide">島嶼手冊</a>
    </nav>
  </header>

  <!-- HERO -->
  <section class="hero hero-cinematic">
    <div class="hero-foreground">
      <h1 class="game-title">汐島</h1>
      <p class="hero-sub">汐島沒有既定結局</p>
      <p>你的選擇，就是方向。</p>
      <div class="hero-actions">
        <button class="btn" type="button" onclick="location.hash='characters'">角色</button>
        <button class="btn ghost" type="button" onclick="location.hash='world'">世界觀</button>
        <button class="btn ghost" type="button" onclick="location.hash='guide'">島嶼手冊</button>
      </div>
    </div>
  </section>

  <section id="world" class="section">
    <h2>———✦ 世界觀 ✦———</h2>
    <p class="lead">汐島位於外海，與本島交通往返穩定。四面環海，地勢由山林延伸至港口與市街。</p>
    <p>島上人口不多，但生活機能完善。港口、酒吧、診所、伐木廠與小型商業區構成日常秩序。</p>
    <p>多數島民在此長期居住，彼此熟識，節奏緩慢而平靜。</p>
    <p>這裡沒有過度的觀光開發，也沒有過多外來干擾。</p>
    <p>如果你願意留下，島嶼會給你一個新的生活方式。</p>
    <p>有些人來此療傷、有些人來此逃避，有些人只是偶然停泊。</p>
    <p>你呢？你為何選擇來到汐島？</p>

    <div class="grid-2">
      <button class="card clickable" type="button" data-modal="m1">
        <h3>汐島如▙▞▗</h3>
        <p>（點我展開）</p>
      </button>

      <button class="card clickable" type="button" data-modal="m2">
        <h3>異常</h3>
        <p>（點我展開）</p>
      </button>
    </div>
  </section>

  <section id="island" class="section">
    <h2>✦ 島嶼</h2>
    <p class="lead">
      汐島位於外海沿線，是一座以自然景觀聞名的小型海島。四面環海，地勢由中央山林緩緩延伸至海岸線，形成層次分明的地貌景觀。
    </p>

    <div class="callout">
      <p>▸ 島上最具特色的是清晰可見的潮汐變化。</p>
      <p>▸ 每日海水隨著時序起伏，退潮時露出平整礁岩與細緻沙灘，漲潮時海面映照天光，波紋隨風推移。</p>
      <p>▸ 晨昏時分，海岸線在光影交錯下呈現不同色澤，是許多旅人特地前來駐足的時刻。</p>
      <p>▸ 島嶼中央保留大片原生林木，沿步道可俯瞰海岸與港區景色。氣候溫和，海風穩定，全年皆適合短期停留與慢步探索。</p>
    </div>
  </section>

  <section id="characters" class="section">
    <h2>✦ 角色</h2>
    <p class="lead">現為島民，曾是▚▙▝。</p>

    <div class="cards">
      <div class="card character" role="link" tabindex="0"
           onclick="location.href='peichuan.html'"
           onkeydown="if(event.key==='Enter') location.href='peichuan.html'">
        <div class="thumb flip" style="--front:url('images/裴川.jpg'); --back:url('images/裴川2.png');">
          <div class="flip-inner"></div>
        </div>
        <div class="meta">
          <div class="name">裴川</div>
          <div class="tags"><span>傾聽</span><span>走神</span><span>話少</span></div>
          <p class="desc">我才35歲，不能算中年吧？</p>
        </div>
      </div>

      <div class="card character" role="link" tabindex="0"
           onclick="location.href='lilin.html'"
           onkeydown="if(event.key==='Enter') location.href='lilin.html'">
        <div class="thumb flip" style="--front:url('images/李璘.jpg'); --back:url('images/李璘2.png');">
          <div class="flip-inner"></div>
        </div>
        <div class="meta">
          <div class="name">李璘</div>
          <div class="tags"><span>冷笑話</span><span>聰明</span><span>溫柔</span></div>
          <p class="desc">記憶力開始變差了，這是初老嗎？</p>
        </div>
      </div>

      <div class="card character" role="link" tabindex="0"
           onclick="location.href='lanyu.html'"
           onkeydown="if(event.key==='Enter') location.href='lanyu.html'">
        <div class="thumb flip" style="--front:url('images/藍昱.jpg'); --back:url('images/藍昱2.png');">
          <div class="flip-inner"></div>
        </div>
        <div class="meta">
          <div class="name">藍昱</div>
          <div class="tags"><span>惡作劇</span><span>心口直快</span><span>享樂主義</span></div>
          <p class="desc">只管從心，不管對錯。</p>
        </div>
      </div>

      <div class="card character" role="link" tabindex="0"
           onclick="location.href='zioen.html'"
           onkeydown="if(event.key==='Enter') location.href='zioen.html'">
        <div class="thumb flip" style="--front:url('images/劉子恩.jpg'); --back:url('images/劉子恩2.png');">
          <div class="flip-inner"></div>
        </div>
        <div class="meta">
          <div class="name">劉子恩</div>
          <div class="tags"><span>隨和</span><span>力氣大</span><span>直率</span></div>
          <p class="desc">身高高力氣大，也許我跟大狗很像？</p>
        </div>
      </div>

      <div class="card character" role="link" tabindex="0"
           onclick="location.href='yufeng.html'"
           onkeydown="if(event.key==='Enter') location.href='yufeng.html'">
        <div class="thumb flip" style="--front:url('images/於楓.jpg'); --back:url('images/於楓2.png');">
          <div class="flip-inner"></div>
        </div>
        <div class="meta">
          <div class="name">於楓</div>
          <div class="tags"><span>毒舌</span><span>幽默</span><span>細心</span></div>
          <p class="desc">孩子沒受傷，但媽媽還是會把小孩帶來。</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== 島嶼手冊 ===== -->
  <section id="guide" class="section">
    <h2>✦ 島嶼手冊</h2>

    <div class="map-layout">
      <div class="map-card">
        <div class="map-title">汐島地圖</div>

        <div id="islandMap" class="island-map" role="application" aria-label="汐島地圖">
          <button class="area a-center" type="button" data-area="center"><span>市中心</span></button>
          <button class="area a-food"   type="button" data-area="food"><span>美食區</span></button>
          <button class="area a-market" type="button" data-area="market"><span>商業區</span></button>
          <button class="area a-harbor" type="button" data-area="harbor"><span>港口</span></button>
          <button class="area a-forest" type="button" data-area="forest"><span>林區步道</span></button>
          <button class="area a-clinic" type="button" data-area="clinic"><span>診所與學校</span></button>

          <div class="coast" aria-hidden="true"></div>
          <div class="mist-line m1" aria-hidden="true"></div>
          <div class="mist-line m2" aria-hidden="true"></div>
        </div>
      </div>

      <aside class="info-card" aria-live="polite">
        <div class="info-head">
          <div class="info-name" id="infoName">市中心</div>
          <div class="info-sub" id="infoSub">商店、郵局、生活雜貨</div>
        </div>
        <div class="info-body" id="infoBody">
          <ul>
            <li>熱鬧的街區，島上的重要樞紐。</li>
            <li>觀光景點特色之一，藝術人文聚集地。</li>
            <li>部分商品標籤沒有產地或日期；鐘樓報時偶爾慢半拍。</li>
          </ul>
        </div>
      </aside>
    </div>
  </section>

  <footer class="footer">© 2026 by 9dando_75 powered and secured by Lovey-Dovey:汐島</footer>

  <!-- ===== Modal ===== -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div id="modalTitle" class="modal-title">標題</div>
        <button class="x" id="modalClose" type="button" aria-label="Close">✕</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <template id="m1">
    <ul>
      <li>只是一座四面環海的島嶼。</li>
      <li>科技與他國無異，每個人都努力工作。</li>
      <li>你還想聽到什麼答案？</li>
    </ul>
  </template>

  <template id="m2">
    <ul>
      <li>陳叔叔腳不好、林阿姨好客熱情、流浪狗都像第一天流浪一樣乾淨。</li>
      <li>很奇怪嗎。</li>
      <li>你又想在這座島找到什麼異常呢？</li>
    </ul>
  </template>

  <!-- ✅ Script 1：Modal（正確結束） -->
  <script>
    const backdrop = document.getElementById("modalBackdrop");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const closeBtn = document.getElementById("modalClose");

    function openModal(templateId) {
      const tpl = document.getElementById(templateId);
      if (!tpl) return;

      const tmp = tpl.content.cloneNode(true);
      const btn = document.querySelector(`[data-modal="${templateId}"]`);
      const h = btn ? btn.querySelector("h3,h4") : null;
      modalTitle.textContent = h ? h.textContent : "介紹";

      modalBody.innerHTML = "";
      modalBody.appendChild(tmp);

      backdrop.classList.add("show");
      backdrop.setAttribute("aria-hidden", "false");
    }

    function closeModal() {
      backdrop.classList.remove("show");
      backdrop.setAttribute("aria-hidden", "true");
    }

    document.querySelectorAll("[data-modal]").forEach((btn) => {
      btn.addEventListener("click", () => openModal(btn.dataset.modal));
    });

    closeBtn.addEventListener("click", closeModal);

    backdrop.addEventListener("click", (e) => {
      if (e.target === backdrop) closeModal();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });
  </script>

  <!-- ✅ Script 2：島嶼手冊切換（用 id 抓，保證能切） -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const GUIDE = {
        center: {
          name: "市中心",
          sub: "商店、郵局、生活雜貨",
          body: `
            <ul>
              <li>熱鬧的街區，島上的重要樞紐。</li>
              <li>觀光景點特色之一，藝術人文聚集地。</li>
            </ul>`
        },
        food: {
          name: "美食區",
          sub: "小吃、酒吧、深夜食堂",
          body: `
            <ul>
              <li>在地小吃及當地特產，千萬別錯過。</li>
              <li>深夜食堂與酒吧，半夜無聊的好去處。</li>
            </ul>`
        },
        market: {
          name: "商業區",
          sub: "金融、物流、政府服務窗口",
          body: `
            <ul>
              <li>服務處備有免費公共電腦。</li>
              <li>島上唯一一間銀行。</li>
              <li>人們對外地新聞反應平淡。</li>
            </ul>`
        },
        harbor: {
          name: "港口",
          sub: "船班、碼頭、夜景",
          body: `
            <ul>
              <li>船班固定，船費平價。</li>
              <li>本島最美潮汐觀賞點。</li>
              <li>清晨漁市可供零售。</li>
            </ul>`
        },
        forest: {
          name: "林區步道",
          sub: "原生林、觀景點、山林",
          body: `
            <ul>
              <li>霧起時方向感會被吃掉，路標不一定可信請注意。</li>
              <li>某些區域長期封鎖請勿任意進出。</li>
              <li>清晨觀景台雲霧繚繞，打卡景點之一。</li>
            </ul>`
        },
        clinic: {
          name: "生活區",
          sub: "醫院、學校、住宅",
          body: `
            <ul>
              <li>診所設備齊全，醫療福祉完善。</li>
              <li>公立學校減免學費，孩子們的優質學區。</li>
              <li>設有里民活動中心,長輩的最佳好去處。</li>
            </ul>`
        }
      };

      const mapEl  = document.getElementById("islandMap");
      const nameEl = document.getElementById("infoName");
      const subEl  = document.getElementById("infoSub");
      const bodyEl = document.getElementById("infoBody");
      if (!mapEl || !nameEl || !subEl || !bodyEl) return;

      function setGuide(key) {
        const data = GUIDE[key];
        if (!data) return;

        nameEl.textContent = data.name;
        subEl.textContent  = data.sub;
        bodyEl.innerHTML   = data.body;

        mapEl.querySelectorAll(".area").forEach(b => b.classList.remove("is-active"));
        const btn = mapEl.querySelector(`.area[data-area="${key}"]`);
        if (btn) btn.classList.add("is-active");
      }

      mapEl.addEventListener("click", (e) => {
        const btn = e.target.closest(".area");
        if (!btn) return;
        setGuide(btn.dataset.area);
      });

      setGuide("center");
    });
  </script>
<script>
/* === Scroll Spy: nav active highlight for each section === */
document.addEventListener("DOMContentLoaded", () => {
  const navLinks = Array.from(document.querySelectorAll('.nav a[href^="#"]'));

  // 把 href="#world" 轉成 { world: <a> }
  const linkById = new Map(
    navLinks
      .map(a => [a.getAttribute("href").slice(1), a])
      .filter(([id]) => id)
  );

  // 你要套用高亮的 section id（必須和 nav href 對得上）
  const sectionIds = ["world", "island", "characters", "guide"]
    .filter(id => document.getElementById(id));

  const sections = sectionIds.map(id => document.getElementById(id));

  function setActive(id){
    navLinks.forEach(a => a.classList.remove("is-active"));
    const link = linkById.get(id);
    if(link) link.classList.add("is-active");
  }

  // IntersectionObserver：看哪個 section 在畫面中占比最大
  const io = new IntersectionObserver((entries) => {
    // 找出目前最「可見」的那個 section
    const visible = entries
      .filter(e => e.isIntersecting)
      .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];

    if(visible && visible.target && visible.target.id){
      setActive(visible.target.id);
    }
  }, {
    root: null,
    // 視窗中間偏上位置進入就算「當前區塊」
    rootMargin: "-30% 0px -55% 0px",
    threshold: [0.06, 0.12, 0.2, 0.35, 0.5, 0.7]
  });

  sections.forEach(sec => io.observe(sec));

  // 頁面剛開或 hash 跳轉時，也要立即對齊高亮
  const initial = location.hash ? location.hash.slice(1) : sections[0]?.id;
  if(initial) setActive(initial);

  window.addEventListener("hashchange", () => {
    const id = location.hash ? location.hash.slice(1) : "";
    if(id) setActive(id);
  });
});
</script>
</body>
</html>
